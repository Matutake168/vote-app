# -*- coding: utf-8 -*-
"""Untitled7.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1WoG4az6_aYBk6GjWO4LJd1lYPes9zLo9
"""

import streamlit as st

# æŠ•ç¥¨å…ˆä¸€è¦§
dantai = list(range(1, 11))

# ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®åˆæœŸåŒ–ï¼ˆåˆå›ã®ã¿ï¼‰
if "vote_counts" not in st.session_state:
    st.session_state.vote_counts = {num: 0 for num in dantai}
if "touched_ids" not in st.session_state:
    st.session_state.touched_ids = []

st.title("ğŸ‰ å­¦åœ’ç¥­ æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ  ğŸ‰")

# å­¦å¹´é¸æŠ
gakunen = st.selectbox("ã‚ãªãŸã®å­¦å¹´ã¯ï¼Ÿ", ["M7", "M8", "C9", "C10", "C11", "C12"])

# å­¦ç±ç•ªå·å…¥åŠ›
gakuban = st.text_input("å­¦ç±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼ša2024013ï¼‰").lower().strip()

# æŠ•ç¥¨å…ˆé¸æŠ
saki = st.selectbox("æŠ•ç¥¨ã—ãŸã„å›£ä½“ã‚’é¸ã‚“ã§ãã ã•ã„ï¼š", dantai)

# æŠ•ç¥¨ãƒœã‚¿ãƒ³
if st.button("æŠ•ç¥¨ï¼"):
    if len(gakuban) == 9 and gakuban[0] in ['a', 'b'] and gakuban[1:].isdigit():
        if gakuban not in st.session_state.touched_ids:
            st.session_state.touched_ids.append(gakuban)
            st.session_state.vote_counts[saki] += 1
            st.success("âœ… æŠ•ç¥¨ãŒå®Œäº†ã—ã¾ã—ãŸï¼ã‚ã‚ŠãŒã¨ã†ï¼")
        else:
            st.error("âš  ã“ã®å­¦ç±ç•ªå·ã¯ã™ã§ã«æŠ•ç¥¨æ¸ˆã¿ã§ã™ã€‚")
    else:
        st.error("âš  æ­£ã—ã„å½¢å¼ã®å­¦ç±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼ša2024013ï¼‰")

# ç¾åœ¨ã®ç¥¨æ•°è¡¨ç¤º
st.subheader("ğŸ“Š ç¾åœ¨ã®æŠ•ç¥¨çŠ¶æ³")
for num in dantai:
    st.write(f"å›£ä½“{num}: {st.session_state.vote_counts[num]}ç¥¨")